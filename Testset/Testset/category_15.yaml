- command: "매일 오전 9시에 조명이 꺼져 있고 창문이 닫혀 있으면 블라인드를 열어 줘. 이후 창문이 열리면 5초 기다렸다가 알람을 울려 줘. 알람이 울린 후 10초 동안 창문이 닫히지 않으면 2초마다 조명을 깜빡여 줘. 블라인드를 열었을 때부터 이때까지 문이 두 번 이상 열렸다 닫혔을 경우, 첫 번째로 열린 시간보다 두 번째로 열린 시간이 길면 에어컨을 꺼 줘."
  code:
  - name: Scenario1
    cron: "0 9 * * *"
    period: 100
    code: |
      phase := 0
      door_open_1 := 0.0
      door_open_2 := 0.0
      open_count := 0
      blind_open_time := 0.0

      if (phase == 0) {
        if ((#Light).switch_switch == 'off' and (#Window).windowControl_window == 'closed')) {
          (#Blind).blind_open()
          blind_open_time = (#Clock).clock_timestamp
          phase = 1
        }
      }

      if (phase == 1) {
        if ((#ContactSensor).contactSensor_contact == 'open') {
          open_count = open_count + 1
          if (open_count == 1) {
            door_open_1 = (#Clock).clock_timestamp
          } else if (open_count == 2) {
            door_open_2 = (#Clock).clock_timestamp
          }
          wait until((#ContactSensor).contactSensor_contact == 'closed')
        }
        if ((#Window).windowControl_window == 'open') {
          (#Clock).clock_delay(0, 0, 5)
          (#Alarm).alarm_siren()
          phase = 2
        }
      }

      if (phase == 2) {
        wait until((#Clock).clock_delay(0, 0, 10))
        if ((#Window).windowControl_window == 'open') {
          (#Light).switch_toggle()
          (#Clock).clock_delay(0, 0, 2)
          (#Light).switch_toggle()
        }

        if (open_count >= 2 and door_open_2 > door_open_1) {
          (#AirConditioner).switch_off()
        }
        break
      }
- command: "문이 열리면 5초 대기 후 조명을 켜고, 조명이 켜진 후 10초 간격으로 창문을 닫았다 열었다 반복해 줘. 만약 온도가 28도 이상일 때 이 과정을 시작했다면, 반복이 3번 끝난 후 멈추고, 선풍기를 켜고 10초 간격으로 알람을 1초간 두 번 울려 줘. 단, 문이 다시 닫히면 이 모든 과정을 즉시 중단하고 조명만 꺼 줘."
  code:
  - name: Scenario1
    cron: ""
    period: 100
    code: |
      step := 0
      repeat_count := 0
      initial_temp := 0.0

      if (step == 0) {
        wait until((#ContactSensor).contactSensor_contact == 'open')
        initial_temp = (#TemperatureSensor).temperatureMeasurement_temperature
        (#Clock).clock_delay(0, 0, 5)
        (#Light).switch_on()
        step = 1
      }

      if (step == 1) {
        if ((#ContactSensor).contactSensor_contact == 'closed') {
          (#Light).switch_off()
          break
        }
        (#Clock).clock_delay(0, 0, 10)
        (#Window).windowControl_close()
        (#Clock).clock_delay(0, 0, 10)
        (#Window).windowControl_open()
        repeat_count = repeat_count + 1

        if ((initial_temp >= 28.0) and (repeat_count == 3)) {
          (#Fan).switch_on()
          (#Clock).clock_delay(0, 0, 10)
          (#Alarm).alarm_siren()
          (#Clock).clock_delay(0, 0, 1)
          (#Alarm).alarm_off()
          (#Clock).clock_delay(0, 0, 10)
          (#Alarm).alarm_siren()
          (#Clock).clock_delay(0, 0, 1)
          (#Alarm).alarm_off()
          break
        }
      }
- command: "에어컨이 꺼진 상태에서 창문이 열렸을 때부터 10초 간격으로 습도를 체크해서, 습도가 60%를 초과하면 블라인드를 내리고 조명을 꺼 줘. 이후 문이 닫히면 5초 지연 후 알람을 울리고, 알람이 울린 후 1분 동안은 문이 열려 있는 동안 1초 간격으로 조명을 깜빡이다가 문이 닫히면 스피커로 ‘문이 닫혔습니다’를 말해 줘."
  code:
  - name: Scenario1
    cron: ""
    period: 100
    code: |
      stage := 0
      humidity_check_timer := 0.0
      alarm_time := 0.0

      if (stage == 0) {
        wait until((#AirConditioner).switch_switch == 'off' and (#Window).windowControl_window == 'open')
        humidity_check_timer = (#Clock).clock_timestamp
        stage = 1
      }

      if (stage == 1) {
        if ((#Clock).clock_timestamp - humidity_check_timer >= 10.0)) {
          humidity_check_timer = (#Clock).clock_timestamp
          if ((#HumiditySensor).relativeHumidityMeasurement_humidity > 60.0)) {
            (#Blind).blind_close()
            (#Light).switch_off()
            stage = 2
          }
        }
      }

      if (stage == 2) {
        wait until((#ContactSensor).contactSensor_contact == 'closed')
        (#Clock).clock_delay(0, 0, 5)
        (#Alarm).alarm_siren()
        alarm_time = (#Clock).clock_timestamp
        stage = 3
      }

      if (stage == 3) {
        if ((#Clock).clock_timestamp - alarm_time < 60.0)) {
          if ((#ContactSensor).contactSensor_contact == 'open') {
            (#Light).switch_toggle()
            (#Clock).clock_delay(0, 0, 1)
            (#Light).switch_toggle()
          } else {
            (#Speaker).mediaPlayback_speak("문이 닫혔습니다")
            break
          }
        } else {
          break
        }
      }
- command: "습도가 70% 이상이 되었을 때 창문이 열려 있으면 5초 후 제습기를 켜고, 이후 온도가 30도 이상 올라가면 에어컨을 켜 줘. 에어컨이 켜진 상태에서 블라인드가 열리면 그 때부터 10초마다 커튼을 열었다 닫았다 반복해 줘. 이때 움직임이 감지되면 알람을 끄고, 5초 동안 움직임이 없으면 다시 알람을 울려 줘."
  code:
  - name: Scenario1
    cron: ""
    period: 100
    code: |
      state := 0
      motion_timer := 0.0

      if (state == 0) {
        wait until((#HumiditySensor).relativeHumidityMeasurement_humidity >= 70.0 and (#Window).windowControl_window == 'open')
        (#Clock).clock_delay(0, 0, 5)
        (#Dehumidifier).switch_on()
        state = 1
      }

      if (state == 1) {
        if ((#TemperatureSensor).temperatureMeasurement_temperature >= 30.0) {
          (#AirConditioner).switch_on()
          state = 2
        }
      }

      if (state == 2) {
        wait until((#Blind).blind_blind == 'open')
        state = 3
      }

      if (state == 3) {
        (#Curtain).curtain_open()
        (#Clock).clock_delay(0, 0, 10)
        (#Curtain).curtain_close()

        if ((#MotionSensor).motionSensor_motion == 'active') {
          (#Alarm).alarm_off()
          motion_timer = (#Clock).clock_timestamp
        }

        if ((#MotionSensor).motionSensor_motion == 'inactive') {
          if ((#Clock).clock_timestamp - motion_timer >= 5.0) {
            (#Alarm).alarm_siren()
          }
        }
      }
- command: "조명이 켜지고 창문이 닫혀 있는 상태에서 문이 열리면 3초 기다렸다가 알람을 울려 줘. 알람이 울린 후 10초 동안 창문이 열리지 않으면 커튼을 닫고 조명을 끈 다음, 선풍기를 50% 속도로 켜 줘. 이후 온도가 27도 이상이면 에어컨을 냉방 모드로 바꾸고, 사람이 감지되면 1초마다 블라인드를 열고 닫는 동작을 3번 반복해 줘. 단, 중간에 TV가 켜지면 모든 동작을 멈추고 스피커를 꺼 줘."
  code:
  - name: Scenario1
    cron: ""
    period: 100
    code: |
      step := 0
      count := 0

      if (step == 0) {
        if ((#Light).switch_switch == 'on' and (#Window).windowControl_window == 'closed' and (#ContactSensor).contactSensor_contact == 'open') {
          step = 1
        }
      }

      if (step == 1) {
        wait until((#Television).switch_switch == 'on') {
          (#Speaker).switch_off()
          break
        }
        (#Clock).clock_delay(0, 0, 3)
        (#Alarm).alarm_siren()
        step = 2
      }

      if (step == 2) {
        wait until((#Television).switch_switch == 'on') {
          (#Speaker).switch_off()
          break
        }
        (#Clock).clock_delay(0, 0, 10)
        if ((#Window).windowControl_window == 'closed') {
          (#Curtain).curtain_close()
          (#Light).switch_off()
          (#Fan).fanControl_setPercent(50)
          step = 3
        }
      }

      if (step == 3) {
        wait until((#Television).switch_switch == 'on') {
          (#Speaker).switch_off()
          break
        }
        if ((#TemperatureSensor).temperatureMeasurement_temperature >= 27.0) {
          (#AirConditioner).airConditionerMode_setAirConditionerMode(mode: cool)
        }
        if ((#OccupancySensor).presenceSensor_presence == 'present') {
          while (count < 3) {
            wait until((#Television).switch_switch == 'on') {
              (#Speaker).switch_off()
              break
            }
            (#Blind).blind_open()
            (#Clock).clock_delay(0, 0, 1)
            (#Blind).blind_close()
            (#Clock).clock_delay(0, 0, 1)
            count = count + 1
          }
          break
        }
      }
- command: "조명이 꺼져 있고 창문이 열려 있는 상태에서 사람이 감지되면 3초 대기 후 조명을 켜고, 5초 후 블라인드를 닫아 줘. 이후 10초마다 알람을 한 번 1초간 울리되, 알람이 두 번 울린 후에는 에어컨을 ‘cool’ 모드로 전환해 줘. 단, 그 사이 문이 열리면 모든 동작을 중지하고 커튼을 닫아 줘."
  code:
  - name: Scenario1
    cron: ""
    period: 100
    code: |
      phase := 0
      alarm_count := 0
      alarm_timer := 0.0

      if (phase == 0) {
        wait until((#Light).switch_switch == 'off' and (#Window).windowControl_window == 'open' and (#OccupancySensor).presenceSensor_presence == 'present')
        (#Clock).clock_delay(0, 0, 3)
        (#Light).switch_on()
        (#Clock).clock_delay(0, 0, 5)
        (#Blind).blind_close()
        alarm_timer = (#Clock).clock_timestamp
        phase = 1
      }

      if (phase == 1) {
        if ((#ContactSensor).contactSensor_contact == 'open') {
          (#Curtain).curtain_close()
          break
        }

        if ((#Clock).clock_timestamp - alarm_timer >= 10.0 and alarm_count < 2) {
          (#Alarm).alarm_siren()
          (#Clock).clock_delay(0, 0, 1)
          (#Alarm).alarm_off()
          alarm_count = alarm_count + 1
          alarm_timer = (#Clock).clock_timestamp
        }

        if (alarm_count == 2) {
          (#AirConditioner).airConditionerMode_setAirConditionerMode(mode: cool)
          break
        }
      }
- command: "매주 월요일 아침 7시에 조명을 20으로 설정해 줘. 이후 사람이 감지되면 블라인드를 열고, 알람이 울릴 때마다 3초 간격으로 커튼을 두 번 열었다 닫아 줘. 이때 창문이 열려 있으면 선풍기를 켜고, 닫혀 있으면 에어컨을 꺼 줘."
  code:
  - name: Scenario1
    cron: "0 7 * * 1"
    period: 100
    code: |
      stage := 0
      alarm_detected := false
      curtain_repeat := 0

      if (stage == 0) {
        (#Light).switchLevel_setLevel(20, 0)
        stage = 1
      }

      if (stage == 1) {
        if ((#OccupancySensor).presenceSensor_presence == 'present') {
          (#Blind).blind_open()
          stage = 2
        }
      }

      if (stage == 2) {
        if ((#Alarm).alarm_alarm == 'siren') {
          alarm_detected = true
          curtain_repeat = 0
          stage = 3
        }
      }

      if (stage == 3) {
        if (alarm_detected and curtain_repeat < 2) {
          (#Curtain).curtain_open()
          (#Clock).clock_delay(0, 0, 3)
          (#Curtain).curtain_close()
          (#Clock).clock_delay(0, 0, 3)
          curtain_repeat = curtain_repeat + 1
        } else if (curtain_repeat >= 2) {
          if ((#Window).windowControl_window == 'open') {
            (#Fan).switch_on()
          } else {
            (#AirConditioner).switch_off()
          }
          alarm_detected = false
          stage = 2
        }
      }
- command: "매일 밤 10시에 창문이 열려 있고 조명이 켜져 있으면 알람을 울리고, 5초 후 블라인드를 닫아 줘. 이후 문이 2번 열렸다 닫히면 커튼을 닫고, TV가 꺼지면 스피커도 꺼 준 다음 조명의 밝기를 0으로 낮춰 줘."
  code:
  - name: Scenario1
    cron: "0 22 * * *"
    period: 100
    code: |
      phase := 0
      door_events := 0
      door_prev := ""
      tv_prev := ""

      if (phase == 0) {
        if ((#Window).windowControl_window == 'open' and (#Light).switch_switch == 'on') {
          (#Alarm).alarm_siren()
          (#Clock).clock_delay(0, 0, 5)
          (#Blind).blind_close()
          phase = 1
        }
      }

      if (phase == 1) {
        if ((#ContactSensor).contactSensor_contact != door_prev) {
          if ((#ContactSensor).contactSensor_contact == 'closed') {
            door_events = door_events + 1
          }
          door_prev = (#ContactSensor).contactSensor_contact
        }

        if (door_events >= 2) {
          (#Curtain).curtain_close()
          phase = 2
        }
      }

      if (phase == 2) {
        if ((#Television).switch_switch != tv_prev and (#Television).switch_switch == 'off') {
          (#Speaker).switch_off()
          (#Light).switchLevel_setLevel(0, 0)
          break
        }
        tv_prev = (#Television).switch_switch
      }
- command: "에어컨이 켜진 상태에서 사람이 감지되면 10초 대기 후 알람을 울리고, 습도가 60%를 넘으면 제습기를 켜 줘. 제습기가 켜진 상태에서 창문이 열리면 3초마다 조명을 번갈아 깜빡이고, 5분 동안 열려 있는 상태가 유지되면 블라인드와 커튼을 모두 닫아 줘."
  code:
  - name: Scenario1
    cron: ""
    period: 100
    code: |
      stage := 0
      start_open_time := 0.0
      blink_flag := false

      if (stage == 0) {
        wait until((#AirConditioner).switch_switch == 'on' and (#OccupancySensor).presenceSensor_presence == 'present')
        (#Clock).clock_delay(0, 0, 10)
        (#Alarm).alarm_siren()
        stage = 1
      }

      if (stage == 1) {
        if ((#HumiditySensor).relativeHumidityMeasurement_humidity > 60.0) {
          (#Dehumidifier).switch_on()
          stage = 2
        }
      }

      if (stage == 2) {
        if ((#Dehumidifier).switch_switch == 'on' and (#Window).windowControl_window == 'open') {
          if (start_open_time == 0.0) {
            start_open_time = (#Clock).clock_timestamp
          }
          if (blink_flag) {
            (#Light).switch_on()
          } else {
            (#Light).switch_off()
          }
          blink_flag = not blink_flag

          if ((#Clock).clock_timestamp - start_open_time >= 300.0) {
            (#Blind).blind_close()
            (#Curtain).curtain_close()
            break
          }

          (#Clock).clock_delay(0, 0, 3)
        } else {
          start_open_time = 0.0
        }
      }
- command: "조명이 꺼지고 커튼이 닫힌 상태에서 문이 열리면, 5초 후 조명을 켜고 창문을 열어 줘. 이후 30초 동안 움직임이 감지되지 않으면 알람을 울려 줘. 그 후 에어컨이 꺼져 있고 온도가 28도 이상이면 에어컨을 켜고, 선풍기가 켜져 있으면 끄고, 꺼져 있으면 그대로 둬 줘."
  code:
  - name: Scenario1
    cron: ""
    period: 100
    code: |
      step := 0
      motion_timer := 0.0

      if (step == 0) {
        wait until((#Light).switch_switch == 'off' and (#Curtain).curtain_curtain == 'closed' and (#ContactSensor).contactSensor_contact == 'open')
        (#Clock).clock_delay(0, 0, 5)
        (#Light).switch_on()
        (#Window).windowControl_open()
        motion_timer = (#Clock).clock_timestamp
        step = 1
      }

      if (step == 1) {
        if ((#MotionSensor).motionSensor_motion == 'inactive' and ((#Clock).clock_timestamp - motion_timer >= 30.0)) {
          (#Alarm).alarm_siren()
          step = 2
        } else if ((#MotionSensor).motionSensor_motion == 'active') {
          motion_timer = (#Clock).clock_timestamp
        }
      }

      if (step == 2) {
        if ((#AirConditioner).switch_switch == 'off' and (#TemperatureSensor).temperatureMeasurement_temperature >= 28.0) {
          (#AirConditioner).switch_on()
        }

        if ((#Fan).switch_switch == 'on') {
          (#Fan).switch_off()
        }

        break
      }
