- code:
  - name: "SmartFarmVentilationAutomation"
    cron: "0 9 * * *"
    period: 100
    code: "phase := 0\nconsecutive_time := 0\n\nif ((#Clock).clock_weekday == \"saturday\") or ((#Clock).clock_weekday == \"sunday\") {\n  break\n}\n\nif (phase == 0) {\n  if ((#Window).windowControl_window == \"closed\") and \n      ((#AirQualityDetector).carbonDioxideMeasurement_carbonDioxide >= 1000.0) and \n      ((#AirQualityDetector).temperatureMeasurement_temperature >= 30.0) {\n    \n    (#Clock).clock_delay(0, 0, 5)\n    (#Window).windowControl_open()\n\n    if ((#Fan).switch_switch == \"off\") {\n      (#Fan).switch_on()\n    }\n\n    phase = 1\n  }\n\n} else if (phase == 1) {\n  if ((#AirQualityDetector).dustSensor_fineDustLevel >= 50) {\n    consecutive_time = consecutive_time + 100\n  } else {\n    consecutive_time = 0\n  }\n\n  if (consecutive_time >= 60000) {\n    (#Window).windowControl_close()\n    (#Fan).switch_off()\n\n    if ((#HumiditySensor).relativeHumidityMeasurement_humidity <= 40.0) {\n      (#Humidifier).switch_on()\n    }\n\n    if ((#SoilMoistureSensor).soilHumidityMeasurement_soilHumidity <= 25.0) and \n        ((#Irrigator).switch_switch == \"off\") {\n      (#Irrigator).switch_on()\n    }\n\n    break\n  }\n}\n"
